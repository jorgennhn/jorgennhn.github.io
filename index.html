<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" type="image/png" href="img/logo2.png">
  <title>Lenker til miljøer</title>
  <style>
    body {
      font-family: "Source Sans Pro", Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
    }

    h2 {
      margin-top: 0;
    }

    .container {
      max-width: 900px;
      margin: auto;
    }

    .tabs {
      display: flex;
      border-bottom: 2px solid #e0e0e0;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid #ddd;
      border-bottom: none;
      background: #fff;
      margin-right: 5px;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
      transition: background 0.2s, transform 0.2s;
    }

    .tab:hover {
      background: #f0f0f0;
      transform: translateY(-2px);
    }

    .tab.active {
      background: #ffffff;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .tab-content {
      display: none;
      background: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .tab-content.active {
      display: block;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.05);
      border-radius: 6px;
      overflow: hidden;
    }
	
	/* Legg litt luft over overskrifter som kommer etter en tabell */
	table + h2,
	table + h3 {
	  margin-top: 24px; /* eller en verdi du synes ser bra ut */
	}

    th, td {
      padding: 12px 10px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background-color: #f7f7f7;
      font-weight: 600;
    }

    tr:last-child td {
      border-bottom: none;
    }

    a {
      color: #0077cc;
      text-decoration: none;
      font-weight: 500;
    }

    a:hover {
      text-decoration: underline;
    }

    input[type="text"] {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-right: 10px;
      width: 250px;
    }

    button {
      padding: 8px 16px;
      background-color: #0077cc;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background-color: #005fa3;
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    h3 {
      margin-bottom: 8px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="tabs" id="tabs"></div>
    <div id="tabContents"></div>
  </div>

  <script>
    const testpersoner = [
      { fnr: "13766991003", navn: "Liten Danser" },
      { fnr: "23820199685", navn: "Alternativ Bajas" }
    ];

    const adminPersoner = [
      { fnr: "11898099247", navn: "Troverdig Blokkfløyte" }
    ];

    const miljoer = {
      "Feature": null,
      "MAS-01": "https://tjenester-hn-mas-01.int-hn.nhn.no/?pnr=",
      "MAS-02": "https://tjenester-hn-mas-02.int-hn.nhn.no/?pnr=",
      "TEST-01": "https://tjenester.hn.test.nhn.no/?pnr=",
      "TEST-02": "https://tjenester.hn2.test.nhn.no/?pnr=",
      "QA": "https://tjenester.hn.qa.nhn.no/?pnr=",
      "PRODKOPI": "https://tjenester-hn-prodkopi-01.int-hn.nhn.no/?pnr="
    };

    const adminUrls = {
      "Feature": "https://admin-helsenorge-{env}.int-hn.nhn.no/?fnr=",
      "MAS-01": "https://admin-helsenorge-mas-01.int-hn.nhn.no/?fnr=",
      "MAS-02": "https://admin-helsenorge-mas-02.int-hn.nhn.no/?fnr=",
      "TEST-01": "https://admin-helsenorge.hn.test.nhn.no/?fnr=",
      "TEST-02": "https://admin-helsenorge.hn2.test.nhn.no/?fnr=",
      "QA": "https://admin-helsenorge.hn.qa.nhn.no/?fnr=",
      "PRODKOPI": "https://admin-helsenorge-prodkopi-01.int-hn.nhn.no/?pnr="
    };

    function buildTabs() {
	  const tabsContainer = document.getElementById("tabs");
	  const contentsContainer = document.getElementById("tabContents");
	  tabsContainer.innerHTML = "";
	  contentsContainer.innerHTML = "";

	  // Les query-param 'tab' fra URL
	  const urlParams = new URLSearchParams(window.location.search);
	  const tabFromQuery = urlParams.get('tab');

	  Object.keys(miljoer).forEach((miljo) => {
		const tab = document.createElement("div");
		tab.className = "tab";
		tab.textContent = miljo;
		tab.onclick = () => openTab(miljo);
		tabsContainer.appendChild(tab);

		const content = document.createElement("div");
		content.id = miljo;
		content.className = "tab-content";

		if (miljo === "Feature") {
		  content.innerHTML = `
			<h2>Feature-miljø</h2>
			<input type="text" id="featureInput" placeholder="feature-miljønavn">
			<button onclick="generateFeatureLinks()">Generer lenker</button>
			<div id="featureLinks"></div>
		  `;
		} else {
		  let tableHtml = `
			<h2>${miljo} testpersoner</h2>
			<table>
			  <tr><th>Lenke</th><th>Navn</th></tr>
		  `;
		  testpersoner.forEach(tp => {
			tableHtml += `
			  <tr>
				<td><a href="${miljoer[miljo]}${tp.fnr}" target="_blank">${tp.fnr}</a></td>
				<td>${tp.navn}</td>
			  </tr>
			`;
		  });
		  tableHtml += `</table>`;

		  tableHtml += `
			<h2>${miljo} Admin</h2>
			<table>
			  <tr><th>Lenke</th><th>Navn</th></tr>
		  `;
		  adminPersoner.forEach(tp => {
			tableHtml += `
			  <tr>
				<td><a href="${adminUrls[miljo]}${tp.fnr}" target="_blank">${tp.fnr}</a></td>
				<td>${tp.navn}</td>
			  </tr>
			`;
		  });
		  tableHtml += `</table>`;

		  content.innerHTML = tableHtml;
		}

		contentsContainer.appendChild(content);
	  });

	  // Åpne default fane: enten fra query-param, eller MAS-01
	  openTab(tabFromQuery || "MAS-01");
	}

	function openTab(tabId) {
	  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
	  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
	  Array.from(document.querySelectorAll('.tab')).find(t => t.textContent === tabId).classList.add("active");
	  document.getElementById(tabId).classList.add("active");

	  // Oppdater query-param i URL uten å reloade siden
	  const url = new URL(window.location);
	  url.searchParams.set('tab', tabId);
	  window.history.replaceState(null, '', url.toString());
	}

    function generateFeatureLinks() {
      const envName = document.getElementById("featureInput").value.trim();
      const linksContainer = document.getElementById("featureLinks");

      if (!envName) {
        linksContainer.innerHTML = "<p>Skriv inn et miljønavn</p>";
        return;
      }

      let tableHtml = `
        <h3>Testpersoner for ${envName}</h3>
        <table>
          <tr><th>Lenke</th><th>Navn</th></tr>
      `;
      testpersoner.forEach(tp => {
        const url = `https://tjenester-${envName}.int-hn.nhn.no/?pnr=${tp.fnr}`;
        tableHtml += `
          <tr>
            <td><a href="${url}" target="_blank">${tp.fnr}</a></td>
            <td>${tp.navn}</td>
          </tr>
        `;
      });
      tableHtml += `</table>`;

      tableHtml += `
        <h3>Admin for ${envName}</h3>
        <table>
          <tr><th>Lenke</th><th>Navn</th></tr>
      `;
      adminPersoner.forEach(tp => {
        const url = adminUrls["Feature"].replace("{env}", envName) + tp.fnr;
        tableHtml += `
          <tr>
            <td><a href="${url}" target="_blank">${tp.fnr}</a></td>
            <td>${tp.navn}</td>
          </tr>
        `;
      });
      tableHtml += `</table>`;

      linksContainer.innerHTML = tableHtml;
    }

    buildTabs();
  </script>
  
  <footer style="margin-top: 40px; padding: 15px 20px; text-align: center; font-size: 0.9rem; color: #555; border-top: 1px solid #ddd;">
  Denne siden er åpen for endringer – bidra gjerne på 
  <a href="https://github.com/jorgennhn/jorgennhn.github.io/" target="_blank">GitHub</a>.
  </footer>

</body>
</html>



